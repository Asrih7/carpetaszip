{"version":3,"file":"src_app_pages_modules_modules_module_ts.js","mappings":"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","sources":["./src/app/pages/modules/modules-routing.module.ts","./src/app/pages/modules/modules.module.ts","./src/app/pages/modules/modules.page.html","./src/app/pages/modules/modules.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ModulesPage } from './modules.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ModulesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ModulesPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ModulesPageRoutingModule } from './modules-routing.module';\n\nimport { ModulesPage } from './modules.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ModulesPageRoutingModule\n  ],\n  declarations: [ModulesPage]\n})\nexport class ModulesPageModule {}\n","<ion-header>\n  <ion-toolbar class=\"ion-text-center\" color=\"primary\">\n    <!-- <ion-buttons slot=\"start\">\n      <ion-button (click)=\"ayuda()\">\n        <ion-icon slot=\"icon-only\" name=\"help-circle-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons> -->\n    <!-- <ion-buttons slot=\"primary\">\n      <ion-button (click)=\"filtro()\">\n        <ion-icon slot=\"icon-only\" name=\"filter-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons> -->\n    <ion-title>Temario</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content fullscreen>\n  <ion-searchbar (ionInput)=\"getItems($event)\" placeholder=\"Buscar por tema o título\"></ion-searchbar>\n  <!-- <ion-list *ngIf=\"listaTemas != null && listaTemas.length > 1\">     \n    <ion-item *ngFor=\"let tema of listaTemas; let i = index\" (click)=\"irAModulo(listaTemas[i])\">\n      <ion-badge slot=\"start\" item-end>Tema {{listaTemas[i].IdTema}}</ion-badge>\n      <ion-button >\n        <div style=\"float:left\">\n          <ion-icon name=\"bookmarks\" class=\"module-icon\"></ion-icon>  \n        </div>\n        <h3 style=\"color:gray;font-weight: bold; font-size: x-small\">{{listaTemas[i].TituloBloque}}</h3>   \n        {{listaTemas[i].Titulo}}\n      </ion-button>\n    </ion-item>\n  </ion-list>\n  <section class=\"ion-padding ion-text-center\" *ngIf=\"listaTemas != null && listaTemas.length < 1\">\n    <img width=\"200\" src=\"../assets/imgs/empty.png\" (click)=\"sinCursos()\">\n  </section> -->\n\n  <ion-card *ngFor=\"let tema of listaTemas; let i = index\" button=\"true\" (click)=\"irAModulo(listaTemas[i])\">\n    <ion-card-header color=\"primary\" class=\"ion-text-center\">\n      <ion-card-subtitle>        \n        {{listaTemas[i].TituloBloque}}\n      </ion-card-subtitle>\n      <ion-card-title>TEMA {{listaTemas[i].IdTema}}</ion-card-title>\n    </ion-card-header>\n\n    <ion-card-content class=\"ion-text-wrap\">\n      <h3><b>{{listaTemas[i].Titulo}}</b></h3>\n    </ion-card-content>    \n  </ion-card> \n\n  <section class=\"ion-padding ion-text-center\" *ngIf=\"listaTemas != null && listaTemas.length < 1\">\n    <img width=\"200\" src=\"../assets/imgs/empty.png\">\n  </section>\n\n</ion-content>\n","import { Component, OnInit } from '@angular/core';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { NavparamService } from 'src/app/services/navparam.service';\nimport { AulavirtualrestProvider } from '../../providers/aulavirtualrest';\nimport { LogoutProvider } from '../../providers/logout';\nimport { Storage } from '@ionic/storage-angular';\n\n@Component({\n  selector: 'app-modules',\n  templateUrl: './modules.page.html',\n  styleUrls: ['./modules.page.scss'],\n})\nexport class ModulesPage implements OnInit {\n\n  idCurso: number;\n  accesoModulos: number;\n  searchQuery: string = '';\n  usuario: any = [];  \n  listaTemas: any[];\n  listaTemasTemp: any[];\n\n  constructor(private router: Router, private navParamService: NavparamService, public proveedor: AulavirtualrestProvider, public proveedorLogout: LogoutProvider, public alertCtrl: AlertController, public loadingCtrl: LoadingController, private storage: Storage) {    \n  }\n\n  ngOnInit() {\n    //this.initializeTemas();\n  }\n\n  ionViewWillEnter() {\n    this.initializeTemas();\n  }\n\n\n  async initializeTemas() {\n\n  const loading = await this.loadingCtrl.create({\n    message: \"Cargando...\",\n    duration: 500\n  });\n  await loading.present();\n\n  // Se obtiene el id del curso de la memoria\n  this.storage.get('idCurso').then((val) => {\n    if (val != null && val != undefined){\n      this.idCurso = val;       \n    }\n    else{\n      // Si no se han recuperado los datos se vuelve a la página de login\n      loading.dismiss();\n      this.proveedorLogout.logout();\n    }\n  });\n\n  // Se obtienen los datos del usuario de la memoria\n  this.storage.get('usuario').then((val) => {\n    if (val != null && val != undefined){\n      this.usuario = JSON.parse(val);\n      // Se consultan todos los módulos/temas del curso\n      this.proveedor.consultarModulos(this.usuario.Mensaje.AuthorizationToken, this.idCurso)\n      .subscribe(\n        (data)=>{this.parseTemasJson(data);},\n        (error)=>{console.log(error);},\n        () =>{loading.dismiss()}\n      )\n    }\n    else{\n      // Si no se han recuperado los datos se vuelve a la página de login\n      loading.dismiss();\n      this.proveedorLogout.logout();\n    }\n  });\n}\n\nasync parseTemasJson(data)\n  {\n    if (data.Error == 0){\n      let jsonArray = data.Mensaje;\n\n      this.listaTemas = [];\n      this.listaTemasTemp = [];\n\n      for(let i=0; i < jsonArray.length; i++)\n      {\n        let jsonObject = jsonArray[i];\n        this.listaTemas.push(jsonObject);\n        this.listaTemasTemp.push(jsonObject);\n      }\n    }\n    // Acceso denegado\n    else if (data.Error == -10){\n      this.proveedorLogout.logout()\n    }\n    else{\n      this.listaTemas = [];\n      const alert = await this.alertCtrl.create({\n        header: 'Sin Temas',\n        message: 'Este curso no contiene temas',\n        buttons: ['OK']\n      });\n      await alert.present();\n    }\n  }\n\n  getItems(ev: any) {\n\n    if (this.listaTemasTemp != null && this.listaTemasTemp != undefined){\n      // Reset items back to all of the items\n      this.listaTemas = this.listaTemasTemp;\n\n      // set val to the value of the searchbar\n      const val = ev.target.value;\n\n      // if the value is an empty string don't filter the items\n      if (val && val.trim() != '') {\n        this.listaTemas = this.listaTemas.filter((item) => {\n          return ((item.Titulo.toLowerCase().indexOf(val.toLowerCase()) > -1) || (item.IdTema == val));\n        })\n      }\n    }\n  }\n\n  irAModulo(modulo: any){\n    //this.navCtrl.push(ModuleDetailPage, {modulo: modulo});\n    this.navParamService.setNavData(modulo);\n    this.router.navigate(['/module-detail']);\n  }\n  \n  ayuda()\n  {\n    //this.navCtrl.push(FaqPage);\n    this.router.navigate(['/faq']);\n  }\n}\n"],"names":["i0","ModulesPage","constructor","router","navParamService","proveedor","proveedorLogout","alertCtrl","loadingCtrl","storage","ngOnInit","ionViewWillEnter","initializeTemas","loading","create","message","duration","present","get","then","val","undefined","idCurso","dismiss","logout","usuario","JSON","parse","consultarModulos","Mensaje","AuthorizationToken","subscribe","data","parseTemasJson","error","console","log","Error","jsonArray","listaTemas","listaTemasTemp","i","length","jsonObject","push","alert","header","buttons","getItems","ev","target","value","trim","filter","item","Titulo","toLowerCase","indexOf","IdTema","irAModulo","modulo","setNavData","navigate","ayuda","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}